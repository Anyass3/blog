import{S as J,i as M,s as P,e as v,c as w,a as k,d as h,b as p,g as Y,H as d,X as V,V as I,F as X,M as O,t as C,k as A,h as F,m as B,j as Q,o as j,p as tt,q as D,Y as et,n as nt,w as Z,x as z,y as G,B as K,Z as H}from"../chunks/vendor-bcb5457f.js";import{R as rt}from"../chunks/render-bc3703be.js";import{s as L}from"../chunks/index-4478c180.js";import{r as st}from"../chunks/singletons-a6a7384f.js";function ot(o){let t,n,e,s;return{c(){t=v("div"),n=v("textarea"),this.h()},l(a){t=w(a,"DIV",{class:!0});var l=k(t);n=w(l,"TEXTAREA",{name:!0,id:!0,class:!0}),k(n).forEach(h),l.forEach(h),this.h()},h(){p(n,"name",""),p(n,"id",""),p(n,"class","h-full w-full focus:outline-none focus:ring-2 p-2 ring-gray-800 bg-gray-800"),p(t,"class","h-full w-full")},m(a,l){Y(a,t,l),d(t,n),V(n,o[0]),e||(s=I(n,"input",o[2]),e=!0)},p(a,[l]){l&1&&V(n,a[0])},i:X,o:X,d(a){a&&h(t),e=!1,s()}}}function at(o,t,n){let e;const{content:s}=L.state;O(o,s,l=>n(0,e=l));function a(){e=this.value,s.set(e)}return[e,s,a]}class lt extends J{constructor(t){super();M(this,t,at,ot,P,{})}}const ct=it;async function it(o,t){return st.goto(o,t,[])}function ut(o){let t,n;return t=new lt({}),{c(){Z(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,s){G(t,e,s),n=!0},i(e){n||(D(t.$$.fragment,e),n=!0)},o(e){j(t.$$.fragment,e),n=!1},d(e){K(t,e)}}}function ft(o){let t,n;return t=new rt({}),{c(){Z(t.$$.fragment)},l(e){z(t.$$.fragment,e)},m(e,s){G(t,e,s),n=!0},i(e){n||(D(t.$$.fragment,e),n=!0)},o(e){j(t.$$.fragment,e),n=!1},d(e){K(t,e)}}}function pt(o){let t,n,e,s=o[0]?"markdown":"preview",a,l,f,i,$,m,x,E,u,r,g,N,R;const S=[ft,ut],y=[];function U(c,_){return c[0]?0:1}return u=U(o),r=y[u]=S[u](o),{c(){t=v("div"),n=v("div"),e=v("button"),a=C(s),l=A(),f=v("div"),i=v("input"),$=A(),m=v("button"),x=C("publish"),E=A(),r.c(),this.h()},l(c){t=w(c,"DIV",{class:!0});var _=k(t);n=w(_,"DIV",{class:!0});var b=k(n);e=w(b,"BUTTON",{class:!0});var q=k(e);a=F(q,s),q.forEach(h),l=B(b),f=w(b,"DIV",{class:!0});var T=k(f);i=w(T,"INPUT",{placeholder:!0,class:!0,type:!0}),$=B(T),m=w(T,"BUTTON",{class:!0});var W=k(m);x=F(W,"publish"),W.forEach(h),T.forEach(h),b.forEach(h),E=B(_),r.l(_),_.forEach(h),this.h()},h(){p(e,"class","btn p-[0.25rem!important] bg-gray-600 text-xl w-[min-content!important] uppercase text-center "),p(i,"placeholder","Title"),p(i,"class","focus:outline-none max-w-full w-[25rem] p-[0.25rem!important] flex-grow placeholder:text-gray-700 bg-slate-500 rounded text-center"),p(i,"type","text"),p(m,"class","btn p-[0.25rem!important] bg-gray-700 text-xl w-[min-content!important] uppercase text-center "),p(f,"class","flex gap-2"),p(n,"class","sticky top-0 flex justify-between gap-5"),p(t,"class","w-full h-full flex flex-col")},m(c,_){Y(c,t,_),d(t,n),d(n,e),d(e,a),d(n,l),d(n,f),d(f,i),V(i,o[1]),d(f,$),d(f,m),d(m,x),d(t,E),y[u].m(t,null),g=!0,N||(R=[I(e,"click",o[5]),I(i,"input",o[6]),I(m,"click",o[4])],N=!0)},p(c,[_]){(!g||_&1)&&s!==(s=c[0]?"markdown":"preview")&&Q(a,s),_&2&&i.value!==c[1]&&V(i,c[1]);let b=u;u=U(c),u!==b&&(nt(),j(y[b],1,1,()=>{y[b]=null}),tt(),r=y[u],r||(r=y[u]=S[u](c),r.c()),D(r,1),r.m(t,null))},i(c){g||(D(r),g=!0)},o(c){j(r),g=!1},d(c){c&&h(t),y[u].d(),N=!1,et(R)}}}function mt(o,t,n){let e,s,a=!1;const{title:l,content:f,snack:i}=L.state;O(o,l,r=>n(1,s=r)),O(o,f,r=>n(7,e=r));const $=r=>{i.show("ken du yow!"),console.log(r),H(f,e="",e),H(l,s="",s),ct("/"+r.pathname)},m=r=>{i.show("amna lu hew de!"),console.error(r)},x=async()=>{if(!s||!e){i.show("Abu completal form be");return}try{const r=await fetch("/write",{method:"post",headers:{accept:"application/json"},body:JSON.stringify({title:s,content:e})});console.log("res",r);const g=await r.json();r.ok?$(g):m(g)}catch(r){if(m)m(null);else throw r}},E=()=>n(0,a=!a);function u(){s=this.value,l.set(s)}return[a,s,l,f,x,E,u]}class bt extends J{constructor(t){super();M(this,t,mt,pt,P,{})}}export{bt as default};
